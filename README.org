#+title: Emacs Config
#+author: Leandrus Fanzec
#+startup: overview
#+SETUPFILE: ~/.emacs.d/latex.setup

* üöÄ Presentaci√≥n

[[file:captura.png]]

Esta es una configuraci√≥n muy b√°sica pero a la vez c√≥moda que he
podido probar con √©xito en la versi√≥n 28 y 27 de Emacs, y en las
distribuciones de Ubuntu, Fedora y Gentoo. En realidad es una
configuraci√≥n muy m√≠nima y simple por lo que no tendr√≠a por qu√© no
funcionar en cualquier otra distribuci√≥n.

Como bien deslizaba en el p√°rrafo anterior, se trata de la
configuraci√≥n b√°sica y minimalista que personalmente he tratado de
mantener, pero estimo sinceramente que, puede ser de utilidad a los
usuarios que deseen conocer por primera vez la capacidad de Emacs.

* ü§∑ ¬øPor qu√© utilizar esta configuraci√≥n?

Una de las primeras dudas que pudiese aparecer al usuario es la
pregunta respecto a ¬øpara qu√© utilizarla? ¬øacaso el programa
necesariamente necesita esa configuraci√≥n? y en definitiva: ¬øPor qu√©
√©sta y no otra?

En s√≠ntesis, creo que esta es una buena configuraci√≥n para una persona
que viene aproxim√°ndose a Emacs, principalmente en esta parte del
mundo en la que se habla espa√±ol y la b√∫squeda de informaci√≥n se hace
dif√≠cil.

Primero porque no se atreve mucho a cambiar su funcionamiento normal,
como es el caso de Doomemacs o Vimspace, las cuales ya son muy
conocidas y tambi√©n utilizadas masivamente pero que sobresaturan las
funciones normales del programa.

En este sentido, tal como podemos observar con la lectura de la
secci√≥n "Packages" son apenas algunos aquellos que se instalan:

- vertico
- orderless
- consult
- pdf-tools

Como se puede notar, esta configuraci√≥n no se encuentra rellenada
paquetes accesorios y creo que con esto cualquier usuario que quisiera
conocer este programa le facilitar√≠a el proceso dado que no se
distorsiona su idea principal. Por lo menos desde un punto de vista
personal, fue lo que busqu√© al iniciarme en Emacs.

Cabe se√±alar que, esto que se ve aqu√≠ consiste en la misma
configuraci√≥n del programa el cual se ejecutar√° al iniciar el
programa. Es un archivo en formato org que invoca ordenes de elisp con
la cual funciona el programa.

** üëì Una configuraci√≥n minima para documentos

Cabe se√±alar que esta configuraci√≥n se enfoca en las necesidades de
una persona no-programador, con eso me refiero a que con el paquete
"pdf-tool", y la template de latex, satisfacen mas bien las
necesidades de aquellos que generalmente utilizan documentos pdf.

Con pdf-tools, tendremos un visualizador y editor de pdf dentro emacs,
el cual tiene distintas configuraciones con las cuales el usuario
puede echar mano. Sin embargo, con la configuraci√≥n por defecto ya
tendremos la posibilidad de resaltar y subrayar el texto. 

* üíª Instalaci√≥n

Para realizar la instalaci√≥n se debiera copiar este repositorio dentro
de la misma carpeta de Emacs para ejecutarlo al inicio del programa:

> git clone https://github.com/leandrusfanzec/emacs-leandrus.git

> cd emacs-leandrus/

> cp * ~/.emacs.d/

_Aviso_: Lo que se est√° haciendo en el √∫ltimo comando es copiar los
archivos del repositorio a la carpeta de configuraciones de
Emacs. Esta carpeta solamente se crea cuando *se haya abierto alguna
vez el programa*, por lo que si nosotros simplemente instalamos Emacs
y luego copiamos dichos documentos nos saldr√° un error se√±alando que
dicho destino (/la carpeta de configuracion ".emacs.d"/), no
existe. Nada impide, por otro lado, que lo hagamos nosotros mismos con
el comando /mkdir/ (en este caso ser√≠a: "mkdir $HOME/.emacs.d").

He decidido hacerlo de esta manera porque es m√°s r√°pido y adem√°s
contiene tambi√©n el template de latex que ser√° de gran ayuda para
usuario.

* üí° Consejos para Uso

Para un mejor en general, se recomienda iniciar el programa Emacs como
daemon y luego simplemente invocar los clientes. Lo que en l√≠nea de
comando es algo as√≠, dependiendo de la distribuci√≥n:

- /ejemplo gen√©rico:/

> emacs -daemon

y luego:

> emacsclient -c

Esto puede variar dependiendo del SO, pero en general esta es la idea:
daemon + client.

Por √∫ltimo, siempre, siempre recurra al manual con "C-h i". Es una
enorme fuente de informaci√≥n importante.

* Template Latex

Como se puede observar en la secci√≥n "Latex" he tomado la template que
da como ejemplo Jake B en un v√≠deo que se cita m√°s abajo. Para poder
utilizar ese archivo de configuraci√≥n como ah√≠ se se√±ala, se debe
tener un archivo de setup que tambi√©n est√° en este repositorio, que,
es de completa autor√≠a de Jake B pero lo dejo aqu√≠ para mayor
facilidad al momento de utilizar estas herramientas.

b√°sicamente al inicio del archivo org se debe establecer lo siguiente:

> #+SETUPFILE: ~/.emacs.d/latex.setup

Esto siguiendo las instrucciones de instalaci√≥n se√±alados un poco m√°s
arriba, dado que la direcci√≥n tiene que apuntar espec√≠ficamente a ese
archivo, el cual puede ser modificado despues por el usuario.

Para hacerlo aun m√°s did√°ctico este mismo archivo ya se encuentra con
esa configuraci√≥n y si quieres probar como funciona basta con
presionar C-c e, y luego: l (Latex), o (generar archivo pdf y
abrirlo), dentro del archivo README.org copiado a la carpeta de Emacs.

Lo puedes hacer abriendo Emacs, luego buscando el archivo con C-x C-f
en el directorio ~/.emacs.d/README.org.

[[file:convertir.png]]

Recuerde que latex debe estar instalado con sus paquetes extras.

* Comportamiento General

En esta primera etapa la configuraci√≥n realiza peque√±os ajustes para
que la interfaz sea un poco m√°s minimalista, elimina el aviso sonoro y
visual, mejora el movimiento de scroll y agrega una funci√≥n de
"unfill" que personalmente me pareci√≥ muy √∫til.

#+begin_src emacs-lisp
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (setq inhibit-splash-screen t)
  (scroll-bar-mode -1)
  (blink-cursor-mode -1)
  ;; Easy-Kill de buffer whitout modifications
  (global-set-key [(control x) (k)] 'kill-this-buffer)
  ;; Mejora la b√∫squeda (simplifica)
  (setq search-whitespace-regexp ".*")
  (setq isearch-lax-whitespace t)
  (setq isearch-regexp-lax-whitespace nil)
  (setq initial-scratch-message "\n;; HOLA!\n\n\n")
  (setq user-full-name "Leandrus Fanzec")

  ;; Unfill Function
  ;;; Stefan Monnier <foo at acm.org>. It is the opposite of fill-paragraph
  (defun unfill-paragraph (&optional region)
    "Takes a multi-line paragraph and makes it into a single line of text."
    (interactive (progn (barf-if-buffer-read-only) '(t)))
    (let ((fill-column (point-max))
          ;; This would override `fill-column' if it's an integer.
          (emacs-lisp-docstring-fill-column t))
      (fill-paragraph nil region)))

  (load-theme 'modus-operandi)            ; Light theme

  ;; Monospaced typeface
  (set-face-attribute 'fixed-pitch nil :family "Ubuntu Mono" :height 1.0)
#+end_src

* Repositorios

Aqu√≠ se configura los repositorios elpa y melpa, creo que con estos
dos los usuarios podr√°s encontrar la mayor√≠a de los paquetes que
busquen, configurando a la vez "use-package" que es muy √∫til para
configurar dichos paquetes.

#+begin_src emacs-lisp
  (require 'package)

  (setq package-archives '(("melpa" . "https://melpa.org/packages/")
			   ("elpa" . "https://elpa.gnu.org/packages/")))

  (package-initialize)
  (unless package-archive-contents
    (package-refresh-contents))

  (unless (package-installed-p 'use-package)
    (package-install 'use-package))

  (require 'use-package)
  (setq use-package-always-ensure t)
#+end_src

* Packages

En esta secci√≥n se instalan y configuran los paquetes que ser√°n
instalados a trav√©s de usa-packages.

#+begin_src emacs-lisp
  ;; Enable vertico
  (use-package vertico
    :init
    (vertico-mode))

  (use-package orderless
    :init
    (setq completion-styles '(orderless basic)
          completion-category-defaults nil
          completion-category-overrides '((file (styles partial-completion)))))

  (use-package pdf-tools
    :config
    (pdf-tools-install))
#+end_src

* Dired

Esto es un peque√±o ajuste para que no aparezcan todos los archivos
ocultos en Dired, haci√©ndolo un poco m√°s simple.

#+begin_src emacs-lisp
  (add-hook 'dired-mode-hook 'dired-hide-details-mode)
#+end_src

* Org

Estas son algunas configuraciones para el uso general de los archivos
en org.  Como por ejemplo el spell-check, sangr√≠a, oculta los s√≠mbolos
de formato de texto, abre las im√°genes autom√°ticamente al abrir los
archivos, modifica el s√≠mbolo de folded de los headlines.

#+begin_src emacs-lisp
  (add-hook 'org-mode-hook 'turn-on-flyspell)
  (setq org-startup-indented t
        org-pretty-entities t
        org-hide-leading-stars t
        org-image-actual-width '(300))
  (setq org-ellipsis " ‚ñº ")
#+end_src

* Org-Agenda

Estas son configuraciones para traducir el calendario y agenda que en
alg√∫n momento los encontr√© por internet y me pareci√≥ perfecto.

#+begin_src emacs-lisp
  ;; Calendar
  (setq calendar-date-style 'iso)
  (setq calendar-week-start-day 1)
  (setq calendar-day-header-array ["Do" "Lu" "Ma" "Mi" "Ju" "Vi" "S√°"])
  (setq calendar-day-name-array ["domingo" "lunes" "martes" "mi√©rcoles" "jueves" "viernes" "s√°bado"])
  (setq calendar-month-abbrev-array ["Ene" "Feb" "Mar" "Abr" "May" "Jun" "Jul" "Ago" "Sep" "Oct" "Nov" "Dic"])
  (setq calendar-month-name-array ["enero" "febrero" "marzo" "abril" "mayo" "junio" "julio" "agosto" "septiembre" "octubre" "noviembre" "diciembre"])
  ;; Agenda
  (setq org-agenda-start-with-log-mode t)
  (setq org-log-done 'time)
  (setq org-log-into-drawer t)


  ;; Resume clocking task when emacs is restarted
  (org-clock-persistence-insinuate)
  ;; Show lot of clocking history so it's easy to pick items off the C-F11 list
  (setq org-clock-history-length 23)
  ;; Resume clocking task on clock-in if the clock is open
  (setq org-clock-in-resume t)
  ;; Sometimes I change tasks I'm clocking quickly - this removes clocked tasks with 0:00 duration
  (setq org-clock-out-remove-zero-time-clocks t)
  ;; Clock out when moving task to a done state
  (setq org-clock-out-when-done t)
  ;; Save the running clock and all clock history when exiting Emacs, load it on startup
  (setq org-clock-persist t)
  ;; Include current clocking task in clock reports
  (setq org-clock-report-include-clocking-task t)

  (setq org-return-follows-link t)
#+end_src

* Latex

Esto es algo tomado de [[https://www.youtube.com/@JakeBox0][Jake B]] por lo que recomiendo ver su v√≠deo que
dejar√© [[https://jakebox.github.io/youtube/org_latex_video.html][aqu√≠]].

#+begin_src emacs-lisp
  (with-eval-after-load 'ox-latex
    (add-to-list 'org-latex-classes
                 '("org-plain-latex"
                   "\\documentclass{article}
             [NO-DEFAULT-PACKAGES]
             [PACKAGES]
             [EXTRA]"
                   ("\\section{%s}" . "\\section*{%s}")
                   ("\\subsection{%s}" . "\\subsection*{%s}")
                   ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
                   ("\\paragraph{%s}" . "\\paragraph*{%s}")
                   ("\\subparagraph{%s}" . "\\subparagraph*{%s}"))))
#+end_src

* Key Maps

Por √∫ltimo, estableceremos los atajos de teclado para que alguna de
las funciones m√°s utilizadas est√©n "m√°s a la mano" a la hora de
trabajar.

#+begin_src emacs-lisp
  ;; Org
  (global-set-key (kbd "C-c c") #'org-capture)
  (global-set-key (kbd "C-c a") #'org-agenda)
  ;; Compara modificaciones en el buffer
  (global-set-key (kbd "C-x v =") #'diff-buffer-with-file)
  ;; Utilities
  (global-set-key (kbd "C-x c") 'calendar)
  ;; Comportamiento imenu
  (global-set-key (kbd "M-i") 'imenu)
  ;; Unfill
  (define-key global-map "\M-Q" 'unfill-paragraph)
  (define-key global-map (kbd "<f5>") 'modus-themes-toggle)
#+end_src
